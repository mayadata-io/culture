<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Code Reviews - MayaData Culture</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../css/open-in.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Welcome to MayaData</a></li><li class="chapter-item expanded affix "><li class="part-title">General</li><li class="chapter-item expanded "><a href="../CODE_OF_CONDUCT.html"><strong aria-hidden="true">1.</strong> Code of Conduct</a></li><li class="chapter-item expanded "><a href="../plow/plow.html"><strong aria-hidden="true">2.</strong> PLOW</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../plow/people_first.html"><strong aria-hidden="true">2.1.</strong> People First</a></li><li class="chapter-item expanded "><a href="../plow/openness.html"><strong aria-hidden="true">2.2.</strong> Openness</a></li><li class="chapter-item expanded "><a href="../plow/ownerhip.html"><strong aria-hidden="true">2.3.</strong> Ownership</a></li><li class="chapter-item expanded "><a href="../plow/winning.html"><strong aria-hidden="true">2.4.</strong> Winning</a></li></ol></li><li class="chapter-item expanded "><a href="../security/basic-security-awareness.html"><strong aria-hidden="true">3.</strong> Security Awareness</a></li><li class="chapter-item expanded affix "><li class="part-title">Remote First</li><li class="chapter-item expanded "><a href="../process/etiquettes.html"><strong aria-hidden="true">4.</strong> Household Manners</a></li><li class="chapter-item expanded "><a href="../process/jira.html"><strong aria-hidden="true">5.</strong> Jira Hygiene</a></li><li class="chapter-item expanded "><a href="../process/meetings.html"><strong aria-hidden="true">6.</strong> Meetings</a></li><li class="chapter-item expanded "><a href="../process/remote-first.html"><strong aria-hidden="true">7.</strong> Remote First</a></li><li class="chapter-item expanded "><a href="../process/standups.html"><strong aria-hidden="true">8.</strong> Written Standups</a></li><li class="chapter-item expanded affix "><li class="part-title">Tools for a Better Life</li><li class="chapter-item expanded "><a href="../tools/gdrive.html"><strong aria-hidden="true">9.</strong> Google Shared Drives</a></li><li class="chapter-item expanded "><a href="../tools/calendar.html"><strong aria-hidden="true">10.</strong> Google Calendar</a></li><li class="chapter-item expanded "><a href="../tools/subscriptions.html"><strong aria-hidden="true">11.</strong> Available Licensed Software</a></li><li class="chapter-item expanded "><a href="../tools/slack.html"><strong aria-hidden="true">12.</strong> Slack</a></li><li class="chapter-item expanded affix "><li class="part-title">Building Software</li><li class="chapter-item expanded "><a href="../craft/coding-style.html"><strong aria-hidden="true">13.</strong> Coding Style Guides</a></li><li class="chapter-item expanded "><a href="../craft/code-review.html" class="active"><strong aria-hidden="true">14.</strong> Code Reviews</a></li><li class="chapter-item expanded "><a href="../craft/release.html"><strong aria-hidden="true">15.</strong> Release Process</a></li><li class="chapter-item expanded affix "><li class="part-title">Community and Product</li><li class="chapter-item expanded "><a href="../process/developer-advocacy.html"><strong aria-hidden="true">16.</strong> Developer Advocacy</a></li><li class="chapter-item expanded "><a href="../process/marketing.html"><strong aria-hidden="true">17.</strong> OpenSource Marketing</a></li><li class="chapter-item expanded "><a href="../process/development.html"><strong aria-hidden="true">18.</strong> Product Development</a></li><li class="chapter-item expanded "><a href="../process/management.html"><strong aria-hidden="true">19.</strong> Product Management</a></li><li class="chapter-item expanded "><a href="../process/support.html"><strong aria-hidden="true">20.</strong> Product Support</a></li><li class="chapter-item expanded "><a href="../handbook/user-adoption.html"><strong aria-hidden="true">21.</strong> User Adoption</a></li><li class="chapter-item expanded "><a href="../process/useraudit.html"><strong aria-hidden="true">22.</strong> User Onboarding</a></li><li class="chapter-item expanded affix "><li class="part-title">Human Interactions</li><li class="chapter-item expanded "><a href="../job-roles/index.html"><strong aria-hidden="true">23.</strong> Roles</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../job-roles/chief-architect.html"><strong aria-hidden="true">23.1.</strong> Chief Architect</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">23.2.</strong> Engineering Teams</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../job-roles/lead-engineer.html"><strong aria-hidden="true">23.2.1.</strong> Lead Engineer</a></li><li class="chapter-item expanded "><a href="../job-roles/backend-engineer.html"><strong aria-hidden="true">23.2.2.</strong> Backend Engineer</a></li><li class="chapter-item expanded "><a href="../job-roles/frontend-engineer.html"><strong aria-hidden="true">23.2.3.</strong> Frontend Engineer</a></li><li class="chapter-item expanded "><a href="../job-roles/test-engineer.html"><strong aria-hidden="true">23.2.4.</strong> Test Engineer</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">23.3.</strong> Community and Solutions</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../job-roles/community-manager.html"><strong aria-hidden="true">23.3.1.</strong> Community Manager</a></li><li class="chapter-item expanded "><a href="../job-roles/customer-success.html"><strong aria-hidden="true">23.3.2.</strong> Customer Success</a></li><li class="chapter-item expanded "><a href="../job-roles/developer-advocate.html"><strong aria-hidden="true">23.3.3.</strong> Developer Advocate</a></li><li class="chapter-item expanded "><a href="../job-roles/technical-account-manager.html"><strong aria-hidden="true">23.3.4.</strong> Technical Account Manager</a></li><li class="chapter-item expanded "><a href="../job-roles/technical-marketing-engineer.html"><strong aria-hidden="true">23.3.5.</strong> Technical Marketing Engineer</a></li><li class="chapter-item expanded "><a href="../job-roles/technical-writer.html"><strong aria-hidden="true">23.3.6.</strong> Technical Writer</a></li><li class="chapter-item expanded "><a href="../job-roles/solution-engineer.html"><strong aria-hidden="true">23.3.7.</strong> Solution Engineer</a></li><li class="chapter-item expanded "><a href="../job-roles/user-adoption-lead.html"><strong aria-hidden="true">23.3.8.</strong> User Adoption Lead</a></li></ol></li><li class="chapter-item expanded "><a href="../job-roles/product-manager.html"><strong aria-hidden="true">23.4.</strong> Product Manager</a></li><li class="chapter-item expanded "><a href="../job-roles/sre.html"><strong aria-hidden="true">23.5.</strong> SRE</a></li></ol></li><li class="chapter-item expanded "><a href="../process/hiring.html"><strong aria-hidden="true">24.</strong> Hiring Process</a></li><li class="chapter-item expanded "><a href="../process/okr.html"><strong aria-hidden="true">25.</strong> OKRs</a></li><li class="chapter-item expanded "><a href="../process/paid-time-off-guide.html"><strong aria-hidden="true">26.</strong> Paid Time Off</a></li><li class="chapter-item expanded "><a href="../process/saying-goodbyes.html"><strong aria-hidden="true">27.</strong> Saying Goodbye</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">28.</strong> India Specific Policies</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../policy/job-abandonment.html"><strong aria-hidden="true">28.1.</strong> Job Abandonment</a></li><li class="chapter-item expanded "><a href="../policy/paid-time-off.html"><strong aria-hidden="true">28.2.</strong> Paid Time Off</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">MayaData Culture</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/mayadata-io/culture" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="code-review"><a class="header" href="#code-review">Code review</a></h1>
<p>Note: Google's <a href="https://google.github.io/eng-practices/review/reviewer/">How to do a code review</a> heavily influenced this document.</p>
<p>Code reviews are an essential part of our constant effort to improve quality of our code base. It is essential for keeping technical debt under control. Good code-review is a balancing act. We don't want to allow smelly code, but also going through review should not be a painful process, which will prevent developers from submitting features or improvements.</p>
<p>Key attributes which reviewers are looking for</p>
<ul>
<li>proposed change is consistent with the rest of the code-base;</li>
<li>proposed change is maintainable (or is not making existing code harder to maintain);</li>
<li>proposed change is improving the overall code health (even if the change itself is not perfect);</li>
<li>proposed change is addressing product/business need described in the parent ticket.</li>
</ul>
<p>Only exception when reviewer could approve change which is worsening overall code health is state of <strong>emergency</strong>.</p>
<h2 id="principles-of-code-review"><a class="header" href="#principles-of-code-review">Principles of code-review</a></h2>
<ul>
<li>
<p>Technical facts overrule opinions and personal preferences.</p>
</li>
<li>
<p>Style is driven by our <a href="coding-style.html">coding style guides</a>. We are striving to keep style consistent across the entire code-base. If something is missing from the style guide, consider proposing a change to it.</p>
</li>
<li>
<p>Code design is never purely personal decision. Sometimes there could be several options how to approach a particular problem. Author of the change should be able to demonstrate her decision process and provided reasoning for the solution chosen. Ideally, such thought process is already captured in comments or in the ticket relevant to the change. If proposed solution is equally good to reviewer's alternative, reviewer should accept author's proposal.</p>
</li>
<li>
<p>If we don't have explicit rule, reviewer can ask author to keep consistency with the rest of the code base (e.g. don't necessarily use some new language construct, if it obstructs readability of the code given the context).</p>
</li>
<li>
<p>Respond to code-review request in a timely manner. If you cannot attend code-review, let the author know and work out if you need to resign as reviewer or review can wait.</p>
</li>
<li>
<p>In cases of big code changes, always try to split change into multiple code-reviews. Is your code design correct? Could you leverage feature-flags / configuration more?</p>
</li>
<li>
<p>When appropriate, organize <strong>pair code-reviews</strong> where author meets (calls) reviewer and go through the review together. Think about pair-programming applied to reviews. How to realize, that it is time for pair-review:</p>
<ul>
<li>your comments became short novels, instead of couple short sentences;</li>
<li>you went through your cup of tea/coffee and you are still not even reached half of the review;</li>
<li>you start to question competency of the author;</li>
<li>you start to think that the author was working on something totally different in parallel.</li>
</ul>
</li>
</ul>
<h3 id="choosing-your-code-reviewer"><a class="header" href="#choosing-your-code-reviewer">Choosing your code-reviewer</a></h3>
<p>Unfortunately, automation in GitLab is currently very limited. You need to pick your reviewer manually. Phabricator is way better, but we are currently not promoting Differential flow as it is more complicated for a junior developers (also not ideal when you need to collaborate on the top of the code).</p>
<p>Rule of thumb for choosing your reviewer is to <strong>escape your bubble</strong>. Try to ask other people first, then your buddy sitting next you. This helps keeping engagement as well as overall understanding of the code-base. It also helps tremendously with keeping whole code-base consistent.</p>
<p>Also, your current reviewer can always pass the review to somebody else, if she feel appropriate. So don't worry and be curious.</p>
<h2 id="key-things-look-for-in-a-code-review"><a class="header" href="#key-things-look-for-in-a-code-review">Key things look for in a code-review</a></h2>
<p>Reviewer should always make sure, that they have thought about the following aspects of the code. Naturally, we expect authors to think about them as well :)</p>
<ul>
<li>The code is well designed. (Sensible modularization of the code, appropriate paradigms being used).</li>
<li>The implementation is actually addressing a need described in the implementation ticket (aka is it doing, what it should be doing?).</li>
<li>The functionality is good for the user -- if used by programmers, does the API make sense? If UI change, does the change make sense to the users, does it look good?</li>
<li>Any parallel programming or external services are handled safely (check for race-conditions, deadlocks, missing timeouts).</li>
<li>The code isn’t more complex than it needs to be.</li>
<li>The developer isn’t implementing things they might need in the future but don’t know they need now.</li>
<li>Code is not weakening our security model.</li>
<li>Code appropriately handles privacy of the users (for example it is not logging unnecessary personal details into application logs).</li>
<li>Code has appropriate unit tests.</li>
<li>Tests are well-designed.</li>
<li>The developer used clear names for everything.</li>
<li>Comments are clear and useful, and mostly explain why instead of what.</li>
<li>Code is appropriately documented.</li>
<li>The code conforms to our style guides.</li>
</ul>
<h2 id="writing-code-review-description--commit-message"><a class="header" href="#writing-code-review-description--commit-message">Writing code-review description &amp; commit message</a></h2>
<p>When you are author getting ready to submit your fresh change for code-review. Always pay attention to the description of the code-review request. A description is a public record of <strong>what</strong> change is being made and <strong>why</strong> it was made. For writing good description apply the same principles as for writing a good commit message. Therefore we are going to cover them together. For more, read <a href="https://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html">A Note About Git Commit Messages</a> from Tim Pope and <a href="https://chris.beams.io/posts/git-commit/">How to Write a Git Commit Message</a> from Chris Beams.</p>
<p>We have agreed to follow <a href="https://www.conventionalcommits.org/">Conventional Commits</a> format. Please, read the specification and go through examples.</p>
<p>Summary of key principles of the good description or commit message:</p>
<ul>
<li>Separate subject from body with a blank line.</li>
<li>Use the imperative mood in the subject line.</li>
<li>Wrap the body at 72 characters for git commit messages.</li>
<li>Use the body to explain what and why vs. how.</li>
<li>Always mention related tickets (no need for full URL, just the ticket id).</li>
</ul>
<h3 id="body-is-informative"><a class="header" href="#body-is-informative">Body is Informative</a></h3>
<ul>
<li>Wrap the body at 72 characters for git commit messages.</li>
</ul>
<p>The rest of the description should be informative. It might include a brief description of the problem that’s being solved, and why this is the best approach. If there are any shortcomings to the approach, they should be mentioned. If relevant, include background information such as bug numbers, benchmark results, and links to design documents.</p>
<h2 id="writing-code-review-comments"><a class="header" href="#writing-code-review-comments">Writing code-review comments</a></h2>
<p>As mentioned at our <a href="/plow/plow.html">values</a>, always remember the human-being on the other side of the line. It is really strongly suggested to use pair-reviews for complex or problematic reviews. Always remember to</p>
<ul>
<li>expect competency and good intentions;</li>
<li>be kind;</li>
<li>comment on the code, never on the person;</li>
<li>explain your reasoning, ask for explanation of author's reasoning;</li>
<li>stay constructive -- suggest what should be changed;</li>
<li>balance between giving explicit directions with just pointing out problems and letting the developer decide.</li>
</ul>
<p>Also, when you needed substantial time for discussion over some topic, you should consider requesting code-rewrite (to make it more understandable) and/or extend in-code documentation. Also consider updating the implementation ticket with a summary of your findings. Code-review comments are rarely accessed retrospectively. Make a special effort to <strong>capture information</strong>, when doing <strong>pair-review</strong>.</p>
<h2 id="emergencies"><a class="header" href="#emergencies">Emergencies</a></h2>
<p>Sometimes the speed of getting change out to the production outweighs having a polished code. Such change should be a <strong>small</strong> change that: allows a major launch to continue instead of rolling back, fixes a bug significantly affecting users in production, handles a pressing legal issue, closes a major security hole, etc.</p>
<p>In emergencies we really do care about the speed of the entire code review process, not just the speed of response. In this case only, the reviewer should care more about the speed of the review and the correctness of the code (does it actually resolve the emergency?) than anything else. Also (perhaps obviously) such reviews should take priority over all other code reviews, when they come up.</p>
<p>However, after the emergency is resolved you should look over the emergency code-changes again and give them a more thorough review.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/mayadata-io/culture/edit/main/craft/code-review.md">Edit this file on GitHub.</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../craft/coding-style.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../craft/release.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../craft/coding-style.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../craft/release.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
